// =============================================================================
// SYST√àME DE BREAKPOINTS MODERNE - 3 GRANDES CAT√âGORIES (2025)
// =============================================================================
// Approche simplifi√©e et logique : PETITS | MOYENS | GRANDS √âCRANS
// Mobile-first avec sectionnisation claire selon l'usage r√©el

// ‚úÖ IMPORT DES MODULES SASS MODERNES
@use 'sass:map';
@use 'sass:list';

// =============================================================================
// 1. BREAKPOINTS - 3 GRANDES CAT√âGORIES LOGIQUES
// =============================================================================

$breakpoints: (
  // üì± PETITS √âCRANS (320px - 700px)
  // === SMARTPHONES & APPAREILS PORTABLES ===
  // Tous Android, iPhones, petits appareils tactiles
  'small-xs': 360px,
  // Samsung Galaxy S25 standard, Android budget
  'small-sm': 375px,
  // iPhone ancien (6/7/8), encore utilis√©
  'small-md': 390px,
  // iPhone 13/14 + iPhone SE 4 (f√©vrier 2025)
  'small-lg': 393px,
  // iPhone 15/16 (standard actuel)
  'small-xl': 412px,
  // Google Pixel s√©rie + nombreux Android
  'small-xxl': 430px,
  // iPhone Plus + iPhone 17 Air 6.6"
  'small-max': 455px,

  // OnePlus flagships s√©rie (limite sup√©rieure mobiles)
  // üìü MOYENS √âCRANS (701px - 1199px)
  // === TABLETTES & √âCRANS INTERM√âDIAIRES ===
  // iPad, tablettes Android, portrait et paysage
  'medium-xs': 744px,
  // iPad Mini 6 (format unique)
  'medium-sm': 768px,
  // iPad classique 9.7" (r√©f√©rence historique)
  'medium-md': 800px,
  // Tablettes Android 11-12" (Samsung Tab S10, Xiaomi Pad 7)
  'medium-lg': 834px,
  // iPad Pro 11" (toutes g√©n√©rations)
  'medium-xl': 900px,
  // Grandes tablettes Android 13-14" (OnePlus Pad 3)
  'medium-xxl': 1024px,
  // iPad Pro 12.9" + tablettes en paysage
  'medium-max': 1032px,

  // iPad Pro 13" M4 (limite sup√©rieure tablettes)
  // üñ•Ô∏è GRANDS √âCRANS (1200px+)
  // === LAPTOPS & DESKTOPS ===
  // Tous les ordinateurs : laptops 13-17", desktops, moniteurs
  'large-xs': 1200px,
  // Laptops compacts 13" + tablettes paysage (standard industrie)
  'large-sm': 1280px,
  // Laptops standards 14-15" (tr√®s populaire)
  'large-md': 1366px,
  // Laptops budget + anciens √©crans (11,69% march√© global)
  'large-lg': 1440px,
  // Laptops premium + desktops 2K entry (point d'√©quilibre)
  'large-xl': 1600px,
  // Laptops gaming 17" + workstations
  'large-xxl': 1920px,
  // Desktop Full HD (22% march√© mondial - standard dominant)
  'large-xxxl': 2560px,
  // Desktop 2K/QHD (premium gaming/pro)
  'large-max': 3840px,
  // Desktop 4K UHD (standard officiel)
  'large-ultra': 5120px // Desktop Ultrawide 5K (pro/cr√©atifs)
) !default;

// =============================================================================
// 2. BREAKPOINTS SP√âCIFIQUES PAR APPAREIL - ORGANIS√âS PAR CAT√âGORIE
// =============================================================================

$device-breakpoints: (
  // üì± PETITS √âCRANS - APPAREILS SP√âCIFIQUES
  // === IPHONE 2025 ===
  'iphone-se-4': (
      width: 390px,
      height: 844px,
    ),
  // Lanc√© f√©vrier 2025
  'iphone-13-14': (
      width: 390px,
      height: 844px,
    ),
  // G√©n√©ration dominante
  'iphone-15-16': (
      width: 393px,
      height: 852px,
    ),
  // Standard Apple actuel
  'iphone-15-16-plus': (
      width: 430px,
      height: 932px,
    ),
  // Plus grandes versions
  'iphone-17-standard': (
      width: 410px,
      height: 890px,
    ),
  // Nouveau 6.3" (sept 2025)
  'iphone-17-air': (
      width: 430px,
      height: 930px,
    ),
  // Format 6.6" ultra-fin
  'iphone-17-pro-max': (
      width: 440px,
      height: 950px,
    ),
  // 6.9" (estimation)
  // === ANDROID FLAGSHIPS 2025 ===
  'galaxy-s25': (
      width: 360px,
      height: 780px,
    ),
  // Samsung standard 6.2"
  'galaxy-s25-ultra': (
      width: 384px,
      height: 824px,
    ),
  // Samsung Ultra 6.8"
  'pixel-9': (
      width: 412px,
      height: 915px,
    ),
  // Google Pixel 6.3"
  'oneplus-13': (
      width: 455px,
      height: 809px,
    ),
  // OnePlus flagship 6.82"
  'xiaomi-15': (
      width: 393px,
      height: 857px,
    ),
  // Xiaomi standard
  // üìü MOYENS √âCRANS - APPAREILS SP√âCIFIQUES
  // === IPAD 2024-2025 ===
  'ipad-mini-6': (
      width: 744px,
      height: 1133px,
    ),
  // iPad Mini moderne
  'ipad-air-11-2024': (
      width: 820px,
      height: 1180px,
    ),
  // iPad Air 11" M2
  'ipad-pro-11-m4': (
      width: 834px,
      height: 1194px,
    ),
  // iPad Pro 11" M4
  'ipad-air-13-2024': (
      width: 1024px,
      height: 1366px,
    ),
  // iPad Air 13" M2
  'ipad-pro-13-m4': (
      width: 1032px,
      height: 1376px,
    ),
  // iPad Pro 13" M4
  // === TABLETTES ANDROID 2025 ===
  'galaxy-tab-s10': (
      width: 800px,
      height: 1280px,
    ),
  // Samsung Tab S10 11"
  'galaxy-tab-s10-ultra': (
      width: 924px,
      height: 1280px,
    ),
  // Samsung Tab S10 Ultra 14.6"
  'pixel-tablet': (
      width: 800px,
      height: 1280px,
    ),
  // Google Pixel Tablet 10.95"
  'oneplus-pad-3': (
      width: 900px,
      height: 1200px,
    ),
  // OnePlus Pad 3 13"+ (2025)
  'xiaomi-pad-7': (
      width: 800px,
      height: 1280px,
    ),
  // Xiaomi Pad 7 11"
  'xiaomi-pad-7-ultra': (
      width: 900px,
      height: 1200px,
    ),
  // Xiaomi Pad 7 Ultra 14"
  // üñ•Ô∏è GRANDS √âCRANS - APPAREILS SP√âCIFIQUES
  // === LAPTOPS POPULAIRES 2025 ===
  'macbook-air-13-m4': (
      width: 1280px,
      height: 832px,
    ),
  // CSS pixels (scaling 2x)
  'macbook-air-15-m4': (
      width: 1440px,
      height: 932px,
    ),
  // CSS pixels (scaling 2x)
  'laptop-fhd-13': (
      width: 1366px,
      height: 768px,
    ),
  // Laptops 13" budget Windows
  'laptop-fhd-15': (
      width: 1920px,
      height: 1080px,
    ),
  // Laptops 15" standard Windows
  'laptop-2k-gaming': (
      width: 2560px,
      height: 1440px,
    ),
  // Laptops gaming/premium 15-17"
  // === DESKTOPS & MONITEURS ===
  'desktop-fhd': (
      width: 1920px,
      height: 1080px,
    ),
  // Full HD dominant (22% march√©)
  'desktop-2k': (
      width: 2560px,
      height: 1440px,
    ),
  // 2K/QHD premium
  'desktop-4k': (
      width: 3840px,
      height: 2160px,
    ),
  // 4K UHD standard
  'desktop-ultrawide': (
      width: 3440px,
      height: 1440px,
    ),
  // Ultrawide populaire
  'desktop-5k': (
      width: 5120px,
      height: 2880px,
    ) // 5K pro/cr√©atifs
) !default;

// =============================================================================
// 3. FONCTIONS UTILITAIRES - SIMPLIFI√âES ET OPTIMIS√âES
// =============================================================================

/// R√©cup√®re une valeur de breakpoint avec validation am√©lior√©e
/// @param {String} $name - Nom du breakpoint
/// @return {String|null} - Valeur du breakpoint ou null si introuvable
@function breakpoint($name) {
  @if map.has-key($breakpoints, $name) {
    @return map.get($breakpoints, $name);
  }
  @warn "‚ö†Ô∏è Breakpoint `#{$name}` introuvable. Breakpoints disponibles: #{map.keys($breakpoints)}";
  @return null;
}

/// R√©cup√®re les dimensions d'un appareil
/// @param {String} $device - Nom de l'appareil
/// @param {String} $property - 'width' ou 'height'
/// @return {String|null} - Valeur de la dimension
@function device-dimension($device, $property: 'width') {
  @if map.has-key($device-breakpoints, $device) {
    $device-map: map.get($device-breakpoints, $device);
    @if map.has-key($device-map, $property) {
      @return map.get($device-map, $property);
    }
    @warn "‚ö†Ô∏è Propri√©t√© `#{$property}` introuvable pour `#{$device}`.";
    @return null;
  }
  @warn "‚ö†Ô∏è Appareil `#{$device}` introuvable. Appareils disponibles: #{map.keys($device-breakpoints)}";
  @return null;
}

/// Obtient le breakpoint suivant dans la m√™me cat√©gorie
/// @param {String} $name - Nom du breakpoint actuel
/// @return {String|null} - Breakpoint suivant
@function next-breakpoint($name) {
  $breakpoint-names: map.keys($breakpoints);
  $index: list.index($breakpoint-names, $name);

  @if $index and $index < length($breakpoint-names) {
    $next-name: list.nth($breakpoint-names, $index + 1);
    @return map.get($breakpoints, $next-name);
  }
  @return null;
}

/// NOUVEAU: D√©termine la cat√©gorie d'un breakpoint
/// @param {String} $name - Nom du breakpoint
/// @return {String} - 'small', 'medium' ou 'large'
@function breakpoint-category($name) {
  @if str-index($name, 'small-') == 1 {
    @return 'small';
  } @else if str-index($name, 'medium-') == 1 {
    @return 'medium';
  } @else if str-index($name, 'large-') == 1 {
    @return 'large';
  }
  @return 'unknown';
}

// =============================================================================
// 4. MIXINS RESPONSIVE - APPROCHE 3 CAT√âGORIES
// =============================================================================

/// Mixin mobile-first standard
/// @param {String} $breakpoint - Nom du breakpoint
@mixin from($breakpoint) {
  $value: breakpoint($breakpoint);
  @if $value {
    @media (min-width: $value) {
      @content;
    }
  }
}

/// Mixin desktop-first standard
/// @param {String} $breakpoint - Nom du breakpoint
@mixin until($breakpoint) {
  $value: breakpoint($breakpoint);
  @if $value {
    @media (max-width: calc(#{$value} - 1px)) {
      @content;
    }
  }
}

/// Mixin entre deux breakpoints
/// @param {String} $from-breakpoint - Breakpoint minimum
/// @param {String} $until-breakpoint - Breakpoint maximum
@mixin between($from-breakpoint, $until-breakpoint) {
  $from-value: breakpoint($from-breakpoint);
  $until-value: breakpoint($until-breakpoint);

  @if $from-value and $until-value {
    @media (min-width: $from-value) and (max-width: calc(#{$until-value} - 1px)) {
      @content;
    }
  }
}

/// NOUVEAU: Mixin pour une cat√©gorie enti√®re
/// @param {String} $category - 'small', 'medium' ou 'large'
@mixin screen-category($category) {
  @if $category == 'small' {
    @media (max-width: 700px) {
      @content;
    }
  } @else if $category == 'medium' {
    @media (min-width: 701px) and (max-width: 1199px) {
      @content;
    }
  } @else if $category == 'large' {
    @media (min-width: 1200px) {
      @content;
    }
  }
}

// =============================================================================
// 5. MIXINS CAT√âGORIES - APPROCHE SIMPLIFI√âE
// =============================================================================

/// üì± PETITS √âCRANS - Smartphones et appareils portables
@mixin small-screens {
  @include screen-category('small');
}

/// üìü MOYENS √âCRANS - Tablettes
@mixin medium-screens {
  @include screen-category('medium');
}

/// üñ•Ô∏è GRANDS √âCRANS - Laptops et desktops
@mixin large-screens {
  @include screen-category('large');
}

/// COMBO: Petits ET moyens √©crans (mobile + tablettes)
@mixin mobile-and-tablets {
  @media (max-width: 1199px) {
    @content;
  }
}

/// COMBO: Moyens ET grands √©crans (tablettes + ordinateurs)
@mixin tablets-and-computers {
  @media (min-width: 701px) {
    @content;
  }
}

// =============================================================================
// 6. MIXINS SP√âCIFIQUES PAR APPAREIL
// =============================================================================

/// Mixin pour cibler un appareil sp√©cifique avec orientation
/// @param {String} $device - Nom de l'appareil
/// @param {String} $orientation - 'portrait', 'landscape', ou null
@mixin device($device, $orientation: null) {
  @if map.has-key($device-breakpoints, $device) {
    $device-map: map.get($device-breakpoints, $device);
    $width: map.get($device-map, 'width');
    $height: map.get($device-map, 'height');

    @if $orientation == 'portrait' {
      @media (width: $width) and (height: $height) and (orientation: portrait) {
        @content;
      }
    } @else if $orientation == 'landscape' {
      @media (width: $height) and (height: $width) and (orientation: landscape) {
        @content;
      }
    } @else {
      @media (width: $width) and (height: $height) {
        @content;
      }
    }
  } @else {
    @warn "‚ö†Ô∏è Appareil `#{$device}` introuvable pour le mixin device.";
  }
}

// =============================================================================
// 7. MIXINS POUR ORIENTATIONS
// =============================================================================

/// Orientation portrait
@mixin portrait {
  @media (orientation: portrait) {
    @content;
  }
}

/// Orientation paysage
@mixin landscape {
  @media (orientation: landscape) {
    @content;
  }
}

/// √âcrans hauts (nouveaux smartphones 2025)
@mixin tall-screen {
  @media (min-height: 850px) {
    @content;
  }
}

/// √âcrans courts
@mixin short-screen {
  @media (max-height: 700px) {
    @content;
  }
}

// =============================================================================
// 8. MIXINS POUR DENSIT√â D'√âCRAN
// =============================================================================

/// √âcrans haute densit√© (Retina, 2x, 3x)
@mixin high-density {
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    @content;
  }
}

/// √âcrans tr√®s haute densit√© (iPhone Pro, flagships Android)
@mixin ultra-density {
  @media (-webkit-min-device-pixel-ratio: 3), (min-resolution: 288dpi) {
    @content;
  }
}

// =============================================================================
// 9. MIXINS POUR PR√âF√âRENCES UTILISATEUR
// =============================================================================

/// Mode sombre (tr√®s populaire en 2025)
@mixin dark-mode {
  @media (prefers-color-scheme: dark) {
    @content;
  }
}

/// Mode clair
@mixin light-mode {
  @media (prefers-color-scheme: light) {
    @content;
  }
}

/// R√©duction de mouvement (accessibilit√©)
@mixin reduced-motion {
  @media (prefers-reduced-motion: reduce) {
    @content;
  }
}

/// Contraste √©lev√©
@mixin high-contrast {
  @media (prefers-contrast: high) {
    @content;
  }
}

/// Donn√©es r√©duites
@mixin reduced-data {
  @media (prefers-reduced-data: reduce) {
    @content;
  }
}

// =============================================================================
// 10. MIXINS POUR CONTENEURS - SIMPLIFI√âS
// =============================================================================

/// Conteneur responsive avec largeurs par cat√©gorie
@mixin container($max-width: null) {
  width: 100%;
  padding-inline: clamp(1rem, 5vw, 2rem);
  margin-inline: auto;

  @if $max-width {
    max-width: $max-width;
  } @else {
    // Petits √©crans : largeur fluide
    @include small-screens {
      max-width: 100%;
      padding-inline: 1rem;
    }

    // Moyens √©crans : largeurs tablettes
    @include medium-screens {
      max-width: 90%;
    }

    // Grands √©crans : largeurs fixes progressives
    @include from('large-xs') {
      max-width: 1140px;
    }

    @include from('large-xl') {
      max-width: 1320px;
    }

    @include from('large-xxl') {
      max-width: 1540px;
    }
  }
}

// =============================================================================
// 11. HELPERS RAPIDES - APPROCHE 3 CAT√âGORIES
// =============================================================================

/// Cacher sur petits √©crans uniquement
@mixin hide-small {
  @include small-screens {
    display: none !important;
  }
}

/// Afficher sur petits √©crans uniquement
@mixin show-small-only {
  @include medium-screens {
    display: none !important;
  }
  @include large-screens {
    display: none !important;
  }
}

/// Cacher sur moyens √©crans uniquement
@mixin hide-medium {
  @include medium-screens {
    display: none !important;
  }
}

/// Optimisations sp√©cifiques par cat√©gorie
@mixin optimize-for-category($category) {
  @if $category == 'small' {
    // Optimisations mobiles
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  } @else if $category == 'medium' {
    // Optimisations tablettes
    scroll-behavior: smooth;
  } @else if $category == 'large' {
    // Optimisations desktop
    cursor: pointer;
    user-select: none;
  }
}

// =============================================================================
// 12. EXEMPLES D'UTILISATION - APPROCHE 3 CAT√âGORIES
// =============================================================================

/*
// Utilisation mobile-first avec les 3 cat√©gories
.component {
  padding: 1rem;
  
  // üì± PETITS √âCRANS (mobiles)
  @include small-screens {
    padding: 0.5rem;
    font-size: 0.9rem;
  }
  
  // üìü MOYENS √âCRANS (tablettes)
  @include medium-screens {
    padding: 1.5rem;
    font-size: 1rem;
  }
  
  // üñ•Ô∏è GRANDS √âCRANS (laptops + desktops)
  @include large-screens {
    padding: 2rem;
    font-size: 1.1rem;
  }
}

// Navigation adapt√©e aux 3 cat√©gories
.navigation {
  // üì± Mobile : navigation fixe en bas
  @include small-screens {
    position: fixed;
    bottom: 0;
    width: 100%;
  }
  
  // üìü Tablette : navigation en haut compacte
  @include medium-screens {
    position: sticky;
    top: 0;
    padding: 1rem;
  }
  
  // üñ•Ô∏è Desktop : navigation compl√®te
  @include large-screens {
    display: flex;
    justify-content: space-between;
    padding: 1.5rem 2rem;
  }
}

// Grille responsive selon les 3 cat√©gories
.grid {
  display: grid;
  gap: 1rem;
  
  @include small-screens {
    grid-template-columns: 1fr; // 1 colonne sur mobile
  }
  
  @include medium-screens {
    grid-template-columns: repeat(2, 1fr); // 2 colonnes sur tablette
  }
  
  @include large-screens {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); // Flexible sur desktop
  }
}

// Utilisation des breakpoints fins quand n√©cessaire
.hero {
  height: 60vh;
  
  @include from('small-lg') {
    height: 70vh; // iPhone 15/16 et plus
  }
  
  @include from('medium-xl') {
    height: 80vh; // Grandes tablettes et plus
  }
  
  @include from('large-xxl') {
    height: 90vh; // Desktop Full HD et plus
  }
}
*/

// =============================================================================
// 13. MIGRATION ET COMPATIBILITY
// =============================================================================

/*
MIGRATION DEPUIS L'ANCIEN SYST√àME:

CORRESPONDANCES:
- 'xs', 'sm', 'md', 'lg', 'xl' ‚Üí 'small-xs', 'small-sm', 'small-md', etc.
- 'tablet-*' ‚Üí 'medium-*'
- 'laptop-*', 'desktop-*' ‚Üí 'large-*'

NOUVEAUX MIXINS SIMPLIFI√âS:
- @include small-screens  // Remplace @include mobile-portrait, etc.
- @include medium-screens // Remplace @include tablet-portrait, etc.  
- @include large-screens  // Remplace @include desktop-up, etc.

AVANTAGES:
‚úÖ 3 cat√©gories logiques faciles √† m√©moriser
‚úÖ Sectionnisation claire par usage r√©el
‚úÖ Laptops et desktops unifi√©s (m√™me comportement)
‚úÖ Nomenclature coh√©rente (small/medium/large + taille)
‚úÖ Compatibilit√© maintenue avec l'ancien syst√®me
‚úÖ Future-proof pour nouveaux appareils

PHILOSOPHIE:
üì± PETITS = Tactile, empil√©, simplifi√©
üìü MOYENS = Hybride, adaptatif, flexible  
üñ•Ô∏è GRANDS = Complexe, multi-colonnes, complet
*/
